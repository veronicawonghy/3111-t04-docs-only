<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NameRecommendationService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PopNames3111</a> &gt; <a href="index.source.html" class="el_package">comp3111.popnames</a> &gt; <span class="el_source">NameRecommendationService.java</span></div><h1>NameRecommendationService.java</h1><pre class="source lang-java linenums">package comp3111.popnames;

/**
 * Class {@code NameRecommendationService} is the class for Task Four 
 * Application.
 *
 * @author	Ceci Au
 * @version	1.0
 */
public class NameRecommendationService {
	
	private String dadName;
	private int dadBirthYear;
	private String momName;
	private int momBirthYear;
	private int targetYear;
	private int algoPreference;
	
	/**
     * Constructs a new NameRecommendationService.
     */
<span class="fc" id="L22">	public NameRecommendationService(String dadName, int dadBirthYear, String momName, int momBirthYear, int targetYear, int algoPreference) {</span>
<span class="fc" id="L23">		this.dadName = dadName;</span>
<span class="fc" id="L24">		this.dadBirthYear = dadBirthYear;</span>
<span class="fc" id="L25">		this.momName = momName;</span>
<span class="fc" id="L26">		this.momBirthYear = momBirthYear;</span>
<span class="fc" id="L27">		this.targetYear = targetYear;</span>
<span class="fc" id="L28">		this.algoPreference = algoPreference;</span>
<span class="fc" id="L29">	}</span>
	
	/**
     * Returns a string of alert text. In general, the function 
     * {@code checkInput} returns a empty string if the inputs are 
     * valid, returns the corresponding alert text if the input(s) 
     * is(are) invalid.
     * &lt;p&gt;
     * Six inputs are checked:
     * &lt;ul&gt;
     * &lt;li&gt;data members {@code dadName} and {@code momName}: whether 
     * it is not empty, and no symbol other than alphabet is entered.
     * &lt;li&gt;data members {@code dadBirthYear}, {@code momBirthYear} 
     * and {@code targetYear}: whether it is within 1880 to 2019.
     * &lt;li&gt;data member {@code algoPreference}: whether an algorithm 
     * is chosen.
     * &lt;/ul&gt;
     * &lt;p&gt;
     * The function will be called by the function {@code 
     * doNameRecommendationService} in class {@code Controller}.
     * &lt;p&gt;
     * @return  a string of alert text.
     */
	public String checkInput() {
<span class="fc" id="L53">		String alertText = &quot;&quot;;</span>
		// check input validation
<span class="fc bfc" id="L55" title="All 2 branches covered.">		if (dadName.isEmpty())</span>
<span class="fc" id="L56">			alertText += &quot;Please input Dad's Name!\n&quot;;</span>
<span class="fc bfc" id="L57" title="All 2 branches covered.">		else if (!dadName.matches(&quot;^[a-zA-Z]*$&quot;))</span>
<span class="fc" id="L58">			alertText += &quot;Please input Dad's Name with only alphabet!\n&quot;;</span>
<span class="fc bfc" id="L59" title="All 2 branches covered.">		if (momName.isEmpty())</span>
<span class="fc" id="L60">			alertText += &quot;Please input Mom's Name!\n&quot;;</span>
<span class="fc bfc" id="L61" title="All 2 branches covered.">		else if (!momName.matches(&quot;^[a-zA-Z]*$&quot;))</span>
<span class="fc" id="L62">			alertText += &quot;Please input Mom's Name with only alphabet!\n&quot;;</span>
<span class="fc bfc" id="L63" title="All 4 branches covered.">		if (dadBirthYear &lt; 1880 || dadBirthYear &gt; 2019)</span>
<span class="fc" id="L64">    		alertText += &quot;Please input number within 1880 and 2019 for Dad's Year of Birth!\n&quot;;</span>
<span class="fc bfc" id="L65" title="All 4 branches covered.">		if (momBirthYear &lt; 1880 || momBirthYear &gt; 2019)</span>
<span class="fc" id="L66">    		alertText += &quot;Please input number within 1880 and 2019 for Mom's Year of Birth!\n&quot;;</span>
<span class="fc bfc" id="L67" title="All 4 branches covered.">		if (targetYear &lt; 1880 || targetYear &gt; 2019)</span>
<span class="fc" id="L68">    		alertText += &quot;Please input number within 1880 and 2019 for Target Year!\n&quot;;</span>
<span class="fc bfc" id="L69" title="All 4 branches covered.">		if (algoPreference != 1 &amp;&amp; algoPreference != 2)</span>
<span class="fc" id="L70">    		alertText += &quot;Please select algorithm !\n&quot;;</span>
<span class="fc" id="L71">    	return alertText;</span>
	}

	/**
     * Returns a string of desired name. In general, the function 
     * {@code getName} returns the recommendation on name of input 
     * {@code gender}.
     * &lt;p&gt;
     * There are two algorithms for both genders:
     * &lt;ul&gt;
     * &lt;li&gt;Algorithm 1 (male): returns the most popular male name 
     * in the year {@code dadBirthYear}.
     * &lt;li&gt;Algorithm 1 (female): returns the most popular female name 
     * in the year {@code momBirthYear}.
     * &lt;li&gt;Algorithm 2 (male): returns the N-th popular male name 
     * with K letters in the year {@code targetYear}, where N is the 
     * last digit of the year {@code momBirthYear} and K is the length 
     * of name {@code dadName}.
     * &lt;li&gt;Algorithm 2 (female): returns the N-th popular female name 
     * with K letters in the year {@code targetYear}, where N is the 
     * last digit of the year {@code dadBirthYear} and K is the length 
     * of name {@code momName}.
     * &lt;/ul&gt;
     * &lt;p&gt;
     * The function will be called by the function {@code 
     * doNameRecommendationService} in class {@code Controller}.
     * &lt;p&gt;
     * @param	gender		the target gender of the summary.
     * @return  a string of name.
     */
	public String getName(String gender) {
<span class="fc" id="L102">		String oReport = &quot;&quot;;</span>
<span class="fc" id="L103">		String name = &quot;&quot;;</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">		String strGender = (gender == &quot;M&quot;) ? &quot;Male&quot; : &quot;Female&quot;;</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">		String strGenderSmall = (gender == &quot;M&quot;) ? &quot;male&quot; : &quot;female&quot;;</span>
<span class="fc bfc" id="L106" title="All 2 branches covered.">		String strParent = (gender == &quot;M&quot;) ? &quot;Dad&quot; : &quot;Mom&quot;;</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">		String strParentInv = (gender == &quot;M&quot;) ? &quot;Mom&quot; : &quot;Dad&quot;;</span>
<span class="fc bfc" id="L108" title="All 2 branches covered.">		if (algoPreference == 1) {</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">			int year = (gender == &quot;M&quot;) ? dadBirthYear : momBirthYear;</span>
<span class="fc" id="L110">			name = AnalyzeNames.getName(year, 1, gender);</span>
<span class="fc" id="L111">			oReport += String.format(&quot;%s name is %s, which is the most popular name with &quot;</span>
					+ &quot;the number of occurrences of %d in %d (%s's Birth Year).\n&quot;, 
<span class="fc" id="L113">					strGender, name, AnalyzeNames.getOccurrence(year, name, gender), year, strParent);</span>
<span class="fc" id="L114">		}</span>
<span class="pc bpc" id="L115" title="1 of 2 branches missed.">		else if (algoPreference == 2) {</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">			int length = (gender == &quot;M&quot;) ? dadName.length() : momName.length();</span>
<span class="fc bfc" id="L117" title="All 2 branches covered.">			int rank = (gender == &quot;M&quot;) ? momBirthYear%10 : dadBirthYear%10;</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">			if (rank == 0)</span>
<span class="fc" id="L119">				rank = 10;</span>
<span class="pc bpc" id="L120" title="3 of 6 branches missed.">			String strRank = (rank == 1) ? &quot;most&quot; : ((rank == 2) ? &quot;2-nd&quot; : ((rank == 3) ? &quot;3-rd&quot; : String.format(&quot;%d-th&quot;, rank)));</span>
<span class="fc" id="L121">			int totalBirth = AnalyzeNames.getTotalBirthByGender(targetYear, gender);</span>
<span class="fc" id="L122">			int count = 0;</span>
<span class="pc bpc" id="L123" title="1 of 4 branches missed.">			for (int i=0; i&lt;totalBirth &amp;&amp; count &lt; rank; i++)</span>
			{
<span class="fc" id="L125">				String curName = AnalyzeNames.getName(targetYear, i+1, gender);</span>
<span class="fc bfc" id="L126" title="All 2 branches covered.">				if (curName.length() == length) {</span>
<span class="fc" id="L127">					++count;</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">					if (count == rank)</span>
<span class="fc" id="L129">						name = curName;</span>
				}
			}
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">			if (name == &quot;&quot;) {</span>
<span class="nc" id="L133">				oReport += String.format(&quot;Sorry, There is no %s name available for algorithm Healthy.\n&quot;</span>
<span class="nc" id="L134">						+ &quot;The most popular name in %d will be recommended instead.\n&quot;, strGenderSmall, targetYear);</span>
<span class="nc" id="L135">				name = AnalyzeNames.getName(targetYear, 1, gender);</span>
<span class="nc" id="L136">				oReport += String.format(&quot;%s name is %s, which is the most popular name with &quot;</span>
						+ &quot;the number of occurrences of %d in %d (Target Year).\n&quot;, 
<span class="nc" id="L138">						strGender, name, AnalyzeNames.getOccurrence(targetYear, name, gender), targetYear);</span>
			}
			else {
<span class="fc" id="L141">				oReport += String.format(&quot;%s name is %s, which is the %s (last digit of %s's Birth Year) &quot;</span>
						+ &quot;popular name with %s (length of %s's Name) letters,\n&quot;
						+ &quot;with the number of occurrences of %d in %d (Target Year).\n&quot;, 
						strGender, name, strRank, strParentInv, 
<span class="fc" id="L145">						length, strParent, </span>
<span class="fc" id="L146">						AnalyzeNames.getOccurrence(targetYear, name, gender), targetYear);</span>
			}
		}
<span class="fc" id="L149">		return oReport;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>